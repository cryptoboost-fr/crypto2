import{i as q,r as n,j as e,m as i,C as l,e as d,B as x,c as D,d as T,f as I,A as O,n as c}from"./index-CObHhl8H.js";import{I as G}from"./input-DnBYjSnk.js";import{C as N}from"./clock-Cvptf0Hh.js";import{C as g}from"./check-circle-BOZoC8Ju.js";import{X as v}from"./x-circle-gEmDHBXj.js";import{S as M}from"./search-BUmQN2JN.js";import{R as P}from"./refresh-cw-Co5-T64g.js";import{E as K}from"./eye-CKZjzqXX.js";import{D as Q}from"./download-App1X-K_.js";import{U as W}from"./upload-BD_erXyM.js";const de=()=>{const{toast:w}=q(),[o,u]=n.useState([]),[_,A]=n.useState([]),[E,R]=n.useState(!0),[s,m]=n.useState(null),[p,k]=n.useState(""),[h,U]=n.useState("all"),[j,L]=n.useState("all");n.useEffect(()=>{setTimeout(()=>{A([{id:"1",email:"john@example.com",full_name:"John Doe",role:"client",status:"active",total_invested:1500,total_profit:250,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"2",email:"jane@example.com",full_name:"Jane Smith",role:"client",status:"active",total_invested:800,total_profit:120,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]),u([{id:"1",user_id:"1",type:"deposit",crypto_type:"BTC",amount:.002,usd_value:1e3,status:"pending",fee_amount:1e-5,created_at:new Date(Date.now()-2*60*60*1e3).toISOString(),updated_at:new Date(Date.now()-2*60*60*1e3).toISOString()},{id:"2",user_id:"2",type:"withdrawal",crypto_type:"ETH",amount:1.5,usd_value:600,status:"pending",fee_amount:.005,created_at:new Date(Date.now()-1*60*60*1e3).toISOString(),updated_at:new Date(Date.now()-1*60*60*1e3).toISOString()},{id:"3",user_id:"1",type:"deposit",crypto_type:"USDT",amount:500,usd_value:500,status:"approved",fee_amount:1,created_at:new Date(Date.now()-24*60*60*1e3).toISOString(),updated_at:new Date(Date.now()-12*60*60*1e3).toISOString()},{id:"4",user_id:"2",type:"withdrawal",crypto_type:"BTC",amount:.001,usd_value:500,status:"rejected",fee_amount:1e-5,created_at:new Date(Date.now()-48*60*60*1e3).toISOString(),updated_at:new Date(Date.now()-36*60*60*1e3).toISOString()}]),R(!1)},1e3)},[]);const z=t=>{u(r=>r.map(a=>a.id===t?{...a,status:"approved",updated_at:new Date().toISOString()}:a)),w("Transaction approuvée !","success"),m(null)},F=t=>{u(r=>r.map(a=>a.id===t?{...a,status:"rejected",updated_at:new Date().toISOString()}:a)),w("Transaction rejetée !","success"),m(null)},y=t=>{const r=_.find(a=>a.id===t);return r?r.full_name:"Utilisateur inconnu"},S=t=>{const r=_.find(a=>a.id===t);return r?r.email:"N/A"},B=t=>{switch(t){case"approved":return e.jsx(g,{className:"w-4 h-4 text-green-500"});case"rejected":return e.jsx(v,{className:"w-4 h-4 text-red-500"});case"pending":return e.jsx(N,{className:"w-4 h-4 text-yellow-500"});default:return e.jsx(N,{className:"w-4 h-4 text-gray-500"})}},V=t=>{switch(t){case"approved":return"Approuvé";case"rejected":return"Rejeté";case"pending":return"En attente";default:return"Inconnu"}},b=t=>t==="deposit"?e.jsx(Q,{className:"w-4 h-4 text-green-600"}):e.jsx(W,{className:"w-4 h-4 text-orange-600"}),C=t=>t==="deposit"?"Dépôt":"Retrait",f=o.filter(t=>{const r=y(t.user_id).toLowerCase().includes(p.toLowerCase())||t.crypto_type.toLowerCase().includes(p.toLowerCase()),a=h==="all"||t.status===h,$=j==="all"||t.type===j;return r&&a&&$}),H=o.filter(t=>t.status==="pending").length,J=o.filter(t=>t.status==="approved").length,X=o.filter(t=>t.status==="rejected").length;return E?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-crypto-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Gestion des Transactions"}),e.jsx("p",{className:"text-muted-foreground",children:"Validez les dépôts et retraits des utilisateurs"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsx(l,{className:"border-yellow-200 bg-yellow-50",children:e.jsx(d,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-yellow-700",children:"En attente"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-800",children:H})]}),e.jsx(N,{className:"w-8 h-8 text-yellow-600"})]})})})}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:e.jsx(l,{className:"border-green-200 bg-green-50",children:e.jsx(d,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-700",children:"Approuvées"}),e.jsx("p",{className:"text-2xl font-bold text-green-800",children:J})]}),e.jsx(g,{className:"w-8 h-8 text-green-600"})]})})})}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:e.jsx(l,{className:"border-red-200 bg-red-50",children:e.jsx(d,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-red-700",children:"Rejetées"}),e.jsx("p",{className:"text-2xl font-bold text-red-800",children:X})]}),e.jsx(v,{className:"w-8 h-8 text-red-600"})]})})})})]}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:e.jsx(l,{children:e.jsx(d,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(G,{placeholder:"Rechercher par utilisateur ou crypto...",value:p,onChange:t=>k(t.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:h,onChange:t=>U(t.target.value),className:"px-3 py-2 border rounded-md text-sm",children:[e.jsx("option",{value:"all",children:"Tous les statuts"}),e.jsx("option",{value:"pending",children:"En attente"}),e.jsx("option",{value:"approved",children:"Approuvé"}),e.jsx("option",{value:"rejected",children:"Rejeté"})]}),e.jsxs("select",{value:j,onChange:t=>L(t.target.value),className:"px-3 py-2 border rounded-md text-sm",children:[e.jsx("option",{value:"all",children:"Tous les types"}),e.jsx("option",{value:"deposit",children:"Dépôt"}),e.jsx("option",{value:"withdrawal",children:"Retrait"})]}),e.jsx(x,{variant:"outline",size:"sm",children:e.jsx(P,{className:"w-4 h-4"})})]})]})})})}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:e.jsxs(l,{children:[e.jsxs(D,{children:[e.jsxs(T,{children:["Transactions (",f.length,")"]}),e.jsx(I,{children:"Liste des transactions en attente de validation"})]}),e.jsx(d,{children:f.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(O,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Aucune transaction trouvée"})]}):e.jsx("div",{className:"space-y-4",children:f.map(t=>e.jsx("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${t.type==="deposit"?"bg-green-100 text-green-600":"bg-orange-100 text-orange-600"}`,children:b(t.type)}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[C(t.type)," ",t.crypto_type]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[y(t.user_id)," • ",S(t.user_id)]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c.formatCryptoAmount(t.amount,t.crypto_type,t.usd_value)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[B(t.status),e.jsx("span",{className:`text-sm font-medium ${t.status==="approved"?"text-green-600":t.status==="rejected"?"text-red-600":"text-yellow-600"}`,children:V(t.status)})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c.formatDate(t.created_at)}),t.status==="pending"&&e.jsx("div",{className:"flex space-x-2 mt-2",children:e.jsxs(x,{size:"sm",onClick:()=>m(t),children:[e.jsx(K,{className:"w-4 h-4 mr-1"}),"Voir"]})})]})]})},t.id))})})]})}),s&&e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>m(null),children:e.jsxs(l,{className:"w-full max-w-md",onClick:t=>t.stopPropagation(),children:[e.jsxs(D,{children:[e.jsxs(T,{className:"flex items-center space-x-2",children:[b(s.type),e.jsx("span",{children:"Détails de la transaction"})]}),e.jsxs(I,{children:[C(s.type)," ",s.crypto_type]})]}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Utilisateur:"}),e.jsx("span",{className:"text-sm",children:y(s.user_id)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Email:"}),e.jsx("span",{className:"text-sm",children:S(s.user_id)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Montant:"}),e.jsx("span",{className:"text-sm font-medium",children:c.formatCryptoAmount(s.amount,s.crypto_type,s.usd_value)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Frais:"}),e.jsx("span",{className:"text-sm",children:c.formatCryptoAmount(s.fee_amount,s.crypto_type)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Date:"}),e.jsx("span",{className:"text-sm",children:c.formatDate(s.created_at)})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(O,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-sm font-medium text-yellow-800",children:"Action requise"})]}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Cette transaction nécessite votre validation. Vérifiez les détails avant de prendre une décision."})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(x,{onClick:()=>z(s.id),className:"flex-1 bg-green-600 hover:bg-green-700",children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"Approuver"]}),e.jsxs(x,{variant:"destructive",onClick:()=>F(s.id),className:"flex-1",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Rejeter"]})]})]})]})})]})};export{de as Transactions};
//# sourceMappingURL=Transactions-D2shkgK7.js.map
